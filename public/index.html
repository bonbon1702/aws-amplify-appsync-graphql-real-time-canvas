<html lang="en" class="">

<head>

    <meta charset="UTF-8">
    <title>Spiderweb</title>


    <style>
        #mynetwork {
            width: 1200px;
            height: 1200px;
            border: 1px solid lightgray;
        }
    </style>

<body>
    <p>Nghia</p>

    <label>
        Filter nodes
        <input type="text" id="nodeFilterSelect" name="fname">
    </label>

    <div id="mynetwork"></div>


    <script src="https://visjs.github.io/vis-network/standalone/umd/vis-network.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <script>
        $.getJSON('https://n9zjjpmsmg.execute-api.ap-southeast-1.amazonaws.com/test001', function (d) {
            // create an array with nodes
            
            var data = $.parseJSON(d);

            let nodeFilterValue = "";

            const nodeFilterSelector = document.getElementById("nodeFilterSelect");

            nodeFilterSelector.addEventListener("change", (e) => {
                // set new value to filter variable
                nodeFilterValue = e.target.value;
                /*
                      refresh DataView,
                      so that its filter function is re-calculated with the new variable
                    */
                nodes.refresh();
            });

            const nodesFilter = (node) => {
                if (nodeFilterValue === "") {
                    return true;
                }
                console.log(node);
                return node.label.includes(nodeFilterValue)
            };

            var nodes = new vis.DataView(new vis.DataSet(data.vertices), { filter: nodesFilter });;

            // create an array with edges
            var edges = new vis.DataSet(data.edges);

            // create a network
            var container = document.getElementById("mynetwork");
            var data = {
                nodes: nodes,
                edges: edges,
            };
            var options = {};
            var network = new vis.Network(container, data, options);
            network.on("stabilizationIterationsDone", function () {
                network.setOptions({ physics: false });
            });
        });


    </script>


</body>

</html>
